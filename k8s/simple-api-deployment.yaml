apiVersion: apps/v1
kind: Deployment
metadata:
  name: fraud-detection-api
  namespace: fraud-detection
  labels:
    app.kubernetes.io/name: fraud-detection
    app.kubernetes.io/component: api
spec:
  replicas: 4
  selector:
    matchLabels:
      app.kubernetes.io/name: fraud-detection
      app.kubernetes.io/component: api
  template:
    metadata:
      labels:
        app.kubernetes.io/name: fraud-detection
        app.kubernetes.io/component: api
      annotations:
        prometheus.io/scrape: "true"
        prometheus.io/port: "80"
        prometheus.io/path: "/metrics"
    spec:
      containers:
      - name: fraud-detection-api
        image: nginx:alpine
        ports:
        - name: http
          containerPort: 80
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 500m
            memory: 512Mi
        livenessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 10
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 5
          periodSeconds: 5

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: fraud-api-demo-content
  namespace: fraud-detection
data:
  index.html: |
    <!DOCTYPE html>
    <html>
    <head>
        <title>üõ°Ô∏è Fraud Detection API - Demo</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
            .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 10px; }
            .status { padding: 15px; background: #d4edda; border: 1px solid #c3e6cb; border-radius: 5px; margin: 20px 0; }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>üõ°Ô∏è Fraud Detection API - Demo</h1>
            <div class="status">
                ‚úÖ <strong>Status:</strong> Running in Kubernetes<br>
                üéØ <strong>Purpose:</strong> –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥–∞ HW_10<br>
                üìä <strong>Replicas:</strong> 4-6 (—É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è HPA)
            </div>
            <h3>üéØ –¶–µ–ª–∏ HW_10</h3>
            <ul>
                <li>‚úÖ –ê–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥ –æ—Ç 4 –¥–æ 6 —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤</li>
                <li>‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å Prometheus –∏ Grafana</li>
                <li>‚úÖ –ê–ª–µ—Ä—Ç–∏–Ω–≥ –ø—Ä–∏ >80% CPU</li>
                <li>‚úÖ Airflow –¥–ª—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏</li>
            </ul>
        </div>
    </body>
    </html>
