# ‚ö° –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±—ã—Å—Ç—Ä–æ–º—É –∑–∞–ø—É—Å–∫—É - HW_10 Production ML —Å–∏—Å—Ç–µ–º–∞

## üéØ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç

–ó–∞–ø—É—Å—Ç–∏—Ç–µ ML —Å–∏—Å—Ç–µ–º—É –¥–µ—Ç–µ–∫—Ü–∏–∏ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞ –∑–∞ 5 –º–∏–Ω—É—Ç!

### üìã –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

- [ ] **–ê–∫–∫–∞—É–Ω—Ç Yandex Cloud** —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º –±–∏–ª–ª–∏–Ω–≥–æ–º
- [ ] **yc CLI** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (`yc init`)
- [ ] **Terraform** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`brew install terraform`)
- [ ] **kubectl** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`brew install kubectl`)
- [ ] **Python 3.11+** —Å uv (`pip install uv`)

### üöÄ –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/mrPDA/HW_10_prod.git
cd HW_10_prod

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Yandex Cloud
export TF_VAR_yc_token=$(yc iam create-token)
export TF_VAR_yc_cloud_id=$(yc config get cloud-id)
export TF_VAR_yc_folder_id=$(yc config get folder-id)
```

### üèóÔ∏è –®–∞–≥ 2: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
cd terraform
terraform init
terraform apply -auto-approve
```

‚è±Ô∏è **–í—Ä–µ–º—è**: ~15 –º–∏–Ω—É—Ç –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–∞

### ‚ò∏Ô∏è –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Kubernetes

```bash
# –ü–æ–ª—É—á–∞–µ–º —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä–∞
yc managed-kubernetes cluster get-credentials ml-fraud-detection-demo --external

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
kubectl get nodes
```

### üöÄ –®–∞–≥ 4: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

```bash
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ–º –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
cd ..
chmod +x deploy/deploy-all.sh
./deploy/deploy-all.sh
```

‚è±Ô∏è **–í—Ä–µ–º—è**: ~5 –º–∏–Ω—É—Ç –Ω–∞ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üåê –®–∞–≥ 5: –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

```bash
# –ü–æ–ª—É—á–∞–µ–º IP —É–∑–ª–æ–≤
kubectl get nodes -o wide

# URL –¥–æ—Å—Ç—É–ø–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ NODE_IP –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π IP):
echo "üõ°Ô∏è API: http://NODE_IP:32134"
echo "üìä Prometheus: http://NODE_IP:32007"
echo "üìà Grafana: http://NODE_IP:30250 (admin/admin123)"
echo "üåä Airflow: http://NODE_IP:31329 (admin/admin)"
```

### üß™ –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥–∞

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
uv add aiohttp requests prometheus-client

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç
uv run tools/testing/simple_stress_test.py --api-url http://NODE_IP:32134/cpu --max-rps 50 --duration 180 --workers 5

# –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
watch kubectl get hpa -n fraud-detection
```

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ß–µ—Ä–µ–∑ 20 –º–∏–Ω—É—Ç —É –≤–∞—Å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

‚úÖ **Kubernetes –∫–ª–∞—Å—Ç–µ—Ä** (2 —É–∑–ª–∞) —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ **Fraud Detection API** (4 –ø–æ–¥–∞) –æ—Ç–≤–µ—á–∞–µ—Ç  
‚úÖ **–ê–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥** –Ω–∞—Å—Ç—Ä–æ–µ–Ω (4-6 –ø–æ–¥–æ–≤)  
‚úÖ **Prometheus** —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏  
‚úÖ **Grafana** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞—à–±–æ—Ä–¥—ã  
‚úÖ **Airflow** –æ—Ä–∫–µ—Å—Ç—Ä—É–µ—Ç ML –ø–∞–π–ø–ª–∞–π–Ω—ã  
‚úÖ **MLflow** –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã  

### üìä –ö–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
kubectl get pods --all-namespaces

# –¢–µ—Å—Ç–∏—Ä—É–µ–º API
curl http://NODE_IP:32134/health

# –ü—Ä–æ–≤–µ—Ä—è–µ–º HPA
kubectl get hpa -n fraud-detection

# –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º –ª–æ–≥–∏
kubectl logs -n fraud-detection deployment/fraud-detection-api
```

---

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**1. Terraform –æ—à–∏–±–∞–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é yc
yc config list

# –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω
export TF_VAR_yc_token=$(yc iam create-token)
```

**2. kubectl –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è**
```bash
# –ó–∞–Ω–æ–≤–æ –ø–æ–ª—É—á–∞–µ–º —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
yc managed-kubernetes cluster get-credentials ml-fraud-detection-demo --external --force
```

**3. –ü–æ–¥—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ –ø–æ–¥–æ–≤
kubectl describe pod POD_NAME -n NAMESPACE
kubectl logs POD_NAME -n NAMESPACE
```

**4. –í–Ω–µ—à–Ω–∏–µ IP –≤ —Å—Ç–∞—Ç—É—Å–µ pending**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ–º NodePort –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ
kubectl get services --all-namespaces
# –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ IP —É–∑–ª–∞ + NodePort
```

---

## üßπ –û—á–∏—Å—Ç–∫–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
# –£–Ω–∏—á—Ç–æ–∂–∞–µ–º –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
cd terraform
terraform destroy -auto-approve
```

üí∞ **–í–∞–∂–Ω–æ**: –≠—Ç–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –±–∏–ª–ª–∏–Ω–≥ –¥–ª—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤!

---

## üìö –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **üìã –ß–∏—Ç–∞–π—Ç–µ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**: [README.md](README.md)
2. **üîß –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**: –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã `k8s/`
3. **üåä –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Airflow DAGs**: –°–º. [AIRFLOW_ACCESS_GUIDE.md](AIRFLOW_ACCESS_GUIDE.md)
4. **üîí –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [—Ä–∞–∑–¥–µ–ª –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](README.md#—Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
5. **üìä –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã Grafana

---

## üÜò –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

- **üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [README.md](README.md)
- **üêõ –ü—Ä–æ–±–ª–µ–º—ã**: [GitHub Issues](https://github.com/mrPDA/HW_10_prod/issues)
- **üí¨ –û–±—Å—É–∂–¥–µ–Ω–∏—è**: [GitHub Discussions](https://github.com/mrPDA/HW_10_prod/discussions)

---

**üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç production-ready ML —Å–∏—Å—Ç–µ–º–∞! üöÄ