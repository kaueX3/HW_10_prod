# üéØ HW_10 - –ö–†–ê–¢–ö–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –ü–†–û–í–ï–†–Ø–Æ–©–ï–ì–û

## üìã –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### ‚úÖ –°—Ç–∞—Ç—É—Å: –ó–ê–î–ê–ù–ò–ï –í–´–ü–û–õ–ù–ï–ù–û

**–†–∞–∑–≤–µ—Ä–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞**: Production ML Fraud Detection —Å –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥–æ–º –≤ Yandex Cloud

---

## üåê –î–û–°–¢–£–ü –ö –°–ò–°–¢–ï–ú–ï (–≥–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ)

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
- **üõ°Ô∏è Fraud Detection API**: http://89.169.137.245:32134
- **üìä Prometheus**: http://89.169.137.245:32007
- **üìà Grafana**: http://89.169.137.245:30250
  - –õ–æ–≥–∏–Ω: `admin`
  - –ü–∞—Ä–æ–ª—å: `admin123`

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ (–≤—Ç–æ—Ä–æ–π —É–∑–µ–ª):
- API: http://89.169.139.226:32134
- Prometheus: http://89.169.139.226:32007
- Grafana: http://89.169.139.226:30250

---

## üîç –ë–´–°–¢–†–ê–Ø –ü–†–û–í–ï–†–ö–ê –¢–†–ï–ë–û–í–ê–ù–ò–ô

### 1. –ê–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥ 4-6 –ø–æ–¥–æ–≤ ‚úÖ
```bash
kubectl get hpa -n fraud-detection
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: MINPODS=4, MAXPODS=6, TARGETS=cpu: X%/70%
```

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚úÖ
- –û—Ç–∫—Ä–æ–π—Ç–µ http://89.169.137.245:32007 - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω Prometheus
- –û—Ç–∫—Ä–æ–π—Ç–µ http://89.169.137.245:30250 - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω Grafana

### 3. ML Pipeline ‚úÖ
```bash
kubectl get pods -n airflow
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: mlflow-server, postgres, airflow pods –≤ —Å—Ç–∞—Ç—É—Å–µ Running
```

### 4. –ê–ª–µ—Ä—Ç–∏–Ω–≥ ‚úÖ
```bash
kubectl get pods -n monitoring
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: prometheus, grafana –≤ —Å—Ç–∞—Ç—É—Å–µ Running
# alertmanager (–±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞)
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ê–í–¢–û–°–ö–ï–ô–õ–ò–ù–ì–ê

### –ó–∞–ø—É—Å–∫ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∞:
```bash
cd /Users/denispukinov/Documents/OTUS/HW_10
uv run simple_stress_test.py --api-url http://89.169.137.245:32134/cpu --max-rps 50 --duration 180 --workers 5
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
watch kubectl get pods -n fraud-detection
```

---

## üìä –ö–õ–Æ–ß–ï–í–´–ï –ê–†–¢–ï–§–ê–ö–¢–´

1. **üìã –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç**: `HW_10_COMPLETION_REPORT.md`
2. **‚úÖ –ß–µ–∫–ª–∏—Å—Ç**: `artifacts/evidence/deployment_checklist.md`
3. **üîó URL –¥–æ—Å—Ç—É–ø–∞**: `artifacts/evidence/system_urls.txt`
4. **üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞**: `artifacts/evidence/cluster_status.txt`
5. **üß™ –¢–µ—Å—Ç—ã API**: `artifacts/evidence/api_tests.txt`

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê (–∫—Ä–∞—Ç–∫–∞—è —Å—Ö–µ–º–∞)

```
Yandex Cloud Kubernetes Cluster (2 nodes)
‚îú‚îÄ‚îÄ fraud-detection namespace
‚îÇ   ‚îú‚îÄ‚îÄ API Pods (4-6) + HPA
‚îÇ   ‚îî‚îÄ‚îÄ LoadBalancer Service
‚îú‚îÄ‚îÄ monitoring namespace
‚îÇ   ‚îú‚îÄ‚îÄ Prometheus
‚îÇ   ‚îú‚îÄ‚îÄ Grafana  
‚îÇ   ‚îî‚îÄ‚îÄ AlertManager
‚îî‚îÄ‚îÄ airflow namespace
    ‚îú‚îÄ‚îÄ Airflow (scheduler, webserver)
    ‚îú‚îÄ‚îÄ MLflow Server
    ‚îî‚îÄ‚îÄ PostgreSQL
```

---

## üéØ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
|------------|--------|----------|
| 4-6 —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –º–æ–¥–µ–ª–∏ | ‚úÖ | `kubectl get hpa -n fraud-detection` |
| –ê–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥ | ‚úÖ | HPA –Ω–∞ CPU >70%, Memory >80% |
| Prometheus –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | ‚úÖ | http://89.169.137.245:32007 |
| Grafana –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è | ‚úÖ | http://89.169.137.245:30250 |
| Airflow –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ | ‚úÖ | `kubectl get pods -n airflow` |
| MLflow –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ | MLflow server —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç |
| –ê–ª–µ—Ä—Ç–∏–Ω–≥ >80% CPU | ‚úÖ | –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ |
| Kafka —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç | ‚úÖ | `simple_stress_test.py` |

---

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò

1. **–û—Ç–∫—Ä–æ–π—Ç–µ API**: http://89.169.137.245:32134
2. **–û—Ç–∫—Ä–æ–π—Ç–µ Grafana**: http://89.169.137.245:30250 (admin/admin123)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥**: `kubectl get hpa -n fraud-detection`
4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç**: `uv run simple_stress_test.py --api-url http://89.169.137.245:32134/cpu`

**–í—Ä–µ–º—è –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É**: ~5-10 –º–∏–Ω—É—Ç

---

## üìû –ö–û–ù–¢–ê–ö–¢–´

- **–°—Ç—É–¥–µ–Ω—Ç**: Denis Pukinov
- **–ö—É—Ä—Å**: OTUS MLOps
- **–ó–∞–¥–∞–Ω–∏–µ**: HW_10 - Production ML Deployment
- **–î–∞—Ç–∞**: 23 —Å–µ–Ω—Ç—è–±—Ä—è 2025

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ì–û–¢–û–í–û –ö –ü–†–û–í–ï–†–ö–ï** ‚úÖ
